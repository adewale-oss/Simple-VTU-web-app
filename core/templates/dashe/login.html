{% load static %}

<!DOCTYPE html>
<!--
Built By Prince -- 09036187325
-->
<html lang="en">
	<!--begin::Head-->
	<head>
		<title>Yangapay</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta property="og:locale" content="en_US">
		<meta property="og:type" content="article">
		
		<link rel="shortcut icon" href="{% static 'landing/img/yan5.ico' %}">
		
		<!--begin::Global Stylesheets Bundle(used by all pages)-->
		<link href="{% static 'dashe/assets/plugins/global/plugins.bundle.css' %}" rel="stylesheet" type="text/css">
		<link href="{% static 'dashe/assets/css/style.bundle.css' %}" rel="stylesheet" type="text/css">
		<!--end::Global Stylesheets Bundle-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.css" integrity="sha512-DIW4FkYTOxjCqRt7oS9BFO+nVOwDL4bzukDyDtMO7crjUZhwpyrWBFroq+IqRe6VnJkTpRAS6nhDvf0w+wHmxg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css" integrity="sha512-O03ntXoVqaGUTAeAmvQ2YSzkCvclZEcPQu1eqloPaHfJ5RuNGiS4l+3duaidD801P50J28EHyonCV06CUlTSag==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		
	</head>
	<!--end::Head-->
	<!--begin::Body-->
	<body id="kt_body" class="bg-body">
		<!--begin::Main-->
		<div class="d-flex flex-column flex-root">
			<!--begin::Authentication - Sign-in -->
			<div class="d-flex flex-column flex-column-fluid bgi-position-y-bottom position-x-center bgi-no-repeat bgi-size-contain bgi-attachment-fixed" style="background-image: url(/metronic8/demo15/assets/media/illustrations/dozzy-1/14.png">
				<!--begin::Content-->
				<div class="d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20">
					<!--begin::Logo-->
					<a href="#" class="mb-12">
						<img alt="Logo" src="{% static 'landing/img/yan1.png' %}" class="h-40px">
					</a>
					<!--end::Logo-->
					<!--begin::Wrapper-->
					<div class="w-lg-500px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto">
						<!--begin::Form-->
						<form class="form w-100" novalidate="novalidate"  action="#">
                            {% csrf_token %}
							<!--begin::Heading-->
							<div class="text-center mb-10">
								<!--begin::Title-->
								<h1 class="text-dark mb-3">Sign In</h1>
								<!--end::Title-->
								<!--begin::Link-->
								<div class="text-gray-400 fw-bold fs-4">New Here? 
								<a href="{% url 'signup' %}" class="link-primary fw-bolder">Create an Account</a></div>
								<!--end::Link-->
							</div>
							<!--begin::Heading-->
							<!--begin::Input group-->
							<div class="fv-row mb-10">
								<!--begin::Label-->
								<label class="form-label fs-6 fw-bolder text-dark">Username</label>
								<!--end::Label-->
								<!--begin::Input-->
								<input class="form-control form-control-lg form-control-solid" type="text" id="login_username"  autocomplete="off">
								<!--end::Input-->
							</div>
							<!--end::Input group-->
							<!--begin::Input group-->
							<div class="fv-row mb-10">
								<!--begin::Wrapper-->
								<div class="d-flex flex-stack mb-2">
									<!--begin::Label-->
									<label class="form-label fw-bolder text-dark fs-6 mb-0">Password</label>
									<!--end::Label-->
									<!--begin::Link-->
									<a href="#" class="link-primary fs-6 fw-bolder">Forgot Password ?</a>
									<!--end::Link-->
								</div>
								<!--end::Wrapper-->
								<!--begin::Input-->
								<input class="form-control form-control-lg form-control-solid" type="password" id="login_password" name="password" autocomplete="off">
								<!--end::Input-->
							</div>
							<!--end::Input group-->
							<!--begin::Actions-->
							<div class="text-center">
								<!--begin::Submit button-->
								<button type="button" id="signin_button" class="btn btn-lg btn-primary w-100 mb-5">
									<span class="indicator-label">Sign In</span>
								</button>
								<!--end::Submit button-->
                                <button id="checking_button" class="btn btn-lg btn-primary w-100 mb-5" hidden>
									<span class="indicator-label">Checking...</span>
								</button>
								<!--end::Submit button-->
								
							</div>
							<!--end::Actions-->
						</form>
						<!--end::Form-->
					</div>
					<!--end::Wrapper-->
				</div>
				<!--end::Content-->
				<!--begin::Footer-->
				<div class="d-flex flex-center flex-column-auto p-10">
					<!--begin::Links-->
					<div class="d-flex align-items-center fw-bold fs-6">
						
						<a href="https://api.whatsapp.com/send?phone=+2349036187325&text=Web%20Development%20Info%20" class="text-muted text-hover-primary px-2">Built By Prince</a>
					</div>
					<!--end::Links-->
				</div>
				<!--end::Footer-->
			</div>
			<!--end::Authentication - Sign-in-->
		</div>
		<!--end::Main-->
		
		<!--begin::Javascript-->
		<!--begin::Global Javascript Bundle(used by all pages)-->
		<script src="{% static 'dashe/assets/plugins/global/plugins.bundle.js' %}"></script>
		<script src="{% static 'dashe/assets/js/scripts.bundle.js' %}"></script>
		<!--end::Global Javascript Bundle-->
		<!--begin::Page Custom Javascript(used by this page)-->
		<script src="{% static 'dashe/assets/js/custom/authentication/sign-in/general.js' %}"></script>
		<!--end::Page Custom Javascript-->
		<!--end::Javascript-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.js" integrity="sha512-OmBbzhZ6lgh87tQFDVBHtwfi6MS9raGmNvUNTjDIBb/cgv707v9OuBVpsN6tVVTLOehRFns+o14Nd0/If0lE/A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script>
            $(document).ready(function () {
    
                login();
              
                function login() {
                  $(document).on("click", "#signin_button", function () {
                   
              
                    let username = $("#login_username").val();
                    let password = $("#login_password").val();
                    let csrftoken = $("[name=csrfmiddlewaretoken]").val();
                    console.log(username)
                    if (username.length > 1) {
                      if (password.length != 0) {
                        
                          $.ajax({
                            type: "POST",
                            url: "/login/",
                            data: { username: username, password: password },
                            headers: { "X-CSRFToken": csrftoken },
                            cache: false,
                            dataType: "JSON",
                            success: function (response) {
                              if (response.code == 200 ){
                                  window.location.href = response.success
                              }else{
                               iziToast.error({
                                  title: "Access Denied - ",
                                  position: "topRight",
                                  message: response.error,
                                });
                                $("#signin_button").show();
                                $("#checking_button").attr('hidden', 'hidden');
                              }
                            },
                            beforeSend: function () {
                                $("#signin_button").hide();
                                $("#checking_button").removeAttr('hidden', true);
    
                              },
                            error: function (response) { },
                          });
                         }else {
                          iziToast.error({
                            title: "Error",
                            position: "topRight",
                            message: "Please input a valid password",
                          });
                        }
                      
                    }else {
                      iziToast.error({
                        title: "Error",
                        position: "topRight",
                        message: "Please input a valid Username",
                      });
                    }
              
                  });
                }
              });
        </script>
		
	</body>
	<!--end::Body-->
</html>