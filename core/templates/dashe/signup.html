{% load static %}

<!DOCTYPE html>
<!--
Built By Prince --09036187325
-->
<html lang="en">
	<!--begin::Head-->
	<head>
		<title>Yangapay</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta property="og:locale" content="en_US">
		<meta property="og:type" content="article">
		<meta property="og:title" content="Metronic - Bootstrap 5 HTML, VueJS, React, Angular &amp; Laravel Admin Dashboard Theme">
		<link rel="shortcut icon" href="{% static 'landing/img/yan5.ico' %}">
		
		<!--begin::Global Stylesheets Bundle(used by all pages)-->
		<link href="{% static 'dashe/assets/plugins/global/plugins.bundle.css' %}" rel="stylesheet" type="text/css">
		<link href="{% static 'dashe/assets/css/style.bundle.css' %}" rel="stylesheet" type="text/css">
		<!--end::Global Stylesheets Bundle-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.css" integrity="sha512-DIW4FkYTOxjCqRt7oS9BFO+nVOwDL4bzukDyDtMO7crjUZhwpyrWBFroq+IqRe6VnJkTpRAS6nhDvf0w+wHmxg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css" integrity="sha512-O03ntXoVqaGUTAeAmvQ2YSzkCvclZEcPQu1eqloPaHfJ5RuNGiS4l+3duaidD801P50J28EHyonCV06CUlTSag==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		
	</head>
	<!--end::Head-->
	<!--begin::Body-->
	<body id="kt_body" class="bg-body">
		<!--begin::Main-->
		<div class="d-flex flex-column flex-root">
			<!--begin::Authentication - Sign-up -->
			<div class="d-flex flex-column flex-column-fluid bgi-position-y-bottom position-x-center bgi-no-repeat bgi-size-contain bgi-attachment-fixed" style="background-image: url(/metronic8/demo15/assets/media/illustrations/dozzy-1/14.png">
				<!--begin::Content-->
				<div class="d-flex flex-center flex-column flex-column-fluid p-5 pb-lg-20">
					<!--begin::Logo-->
					<a href="#" class="mb-12">
						<img alt="Logo" src="{% static 'landing/img/yan1.png' %}" class="h-40px">
						
					</a>
					
					<!--end::Logo-->
					<!--begin::Wrapper-->
					<div class="w-lg-600px bg-body rounded shadow-sm p-5 p-lg-15 mx-auto">
						<!--begin::Form-->
						<form class="form w-100" novalidate="novalidate" id="kt_sign_up_form">
                            {% csrf_token %}
							<!--begin::Heading-->
							<div class="mb-10 text-center">
								<!--begin::Title-->
								<h1 class="text-dark mb-3">Create an Account</h1>
								<!--end::Title-->
								<!--begin::Link-->
								<div class="text-gray-400 fw-bold fs-4">Already have an account? 
								<a href="{% url 'login' %}" class="link-primary fw-bolder">Sign in here</a></div>
								<!--end::Link-->
							</div>
							<!--end::Heading-->
							
							<!--begin::Separator-->
							<div class="d-flex align-items-center mb-10">
								<div class="border-bottom border-gray-300 mw-50 w-100"></div>
								
								<div class="border-bottom border-gray-300 mw-50 w-100"></div>
							</div>
							<!--end::Separator-->
							<!--begin::Input group-->
							<div class="row fv-row mb-7">
								<!--begin::Col-->
								<div class="col-xl-6">
									<label class="form-label fw-bolder text-dark fs-6">Full Name</label>
									<input class="form-control form-control-lg form-control-solid" type="text" placeholder="" id="signup_name" name="first-name" autocomplete="off">
								</div>
								<!--end::Col-->
								<!--begin::Col-->
								<div class="col-xl-6">
									<label class="form-label fw-bolder text-dark fs-6">Username</label>
									<input class="form-control form-control-lg form-control-solid" type="text" id="signup_username" placeholder="" name="last-name" autocomplete="off">
								</div>
								<!--end::Col-->
							</div>
							<!--end::Input group-->
							<!--begin::Input group-->
							<div class="fv-row mb-7">
								<label class="form-label fw-bolder text-dark fs-6">Email</label>
								<input class="form-control form-control-lg form-control-solid" type="email" id="signup_email" placeholder="" name="email" autocomplete="off">
							</div>
                            <div class="fv-row mb-7">
								<label class="form-label fw-bolder text-dark fs-6">Mobile No</label>
								<input class="form-control form-control-lg form-control-solid" type="email" id="signup_phone" placeholder="" name="email" autocomplete="off">
							</div>
							<!--end::Input group-->
							<!--begin::Input group-->
							<div class="mb-10 fv-row" data-kt-password-meter="true">
								<!--begin::Wrapper-->
								<div class="mb-1">
									<!--begin::Label-->
									<label class="form-label fw-bolder text-dark fs-6">Password</label>
									<!--end::Label-->
									<!--begin::Input wrapper-->
									<div class="position-relative mb-3">
										<input class="form-control form-control-lg form-control-solid" type="password" id="signup_password1" placeholder="" name="password" autocomplete="off">
										<span class="btn btn-sm btn-icon position-absolute translate-middle top-50 end-0 me-n2" data-kt-password-meter-control="visibility">
											<i class="bi bi-eye-slash fs-2"></i>
											<i class="bi bi-eye fs-2 d-none"></i>
										</span>
									</div>
									<!--end::Input wrapper-->
									<!--begin::Meter-->
									<div class="d-flex align-items-center mb-3" data-kt-password-meter-control="highlight">
										<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
										<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
										<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
										<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px"></div>
									</div>
									<!--end::Meter-->
								</div>
								<!--end::Wrapper-->
								<!--begin::Hint-->
								<div class="text-muted">Use 8 or more characters with a mix of letters, numbers &amp; symbols.</div>
								<!--end::Hint-->
							</div>
							<!--end::Input group=-->
							<!--begin::Input group-->
							<div class="fv-row mb-5">
								<label class="form-label fw-bolder text-dark fs-6">Confirm Password</label>
								<input class="form-control form-control-lg form-control-solid" type="password" id="signup_password2" placeholder="" name="confirm-password" autocomplete="off">
							</div>
							<!--end::Input group-->
							<!--begin::Input group-->
							<div class="fv-row mb-10">
								<label class="form-check form-check-custom form-check-solid form-check-inline">
									<input class="form-check-input" type="checkbox" name="toc" value="1">
									<span class="form-check-label fw-bold text-gray-700 fs-6">I Agree 
									<a href="#" class="ms-1 link-primary">Terms and conditions</a>.</span>
								</label>
							</div>
							<!--end::Input group-->
							<!--begin::Actions-->
							<div class="text-center">
								<button type="button" id="signup_button" class="btn btn-lg btn-primary">
									<span class="indicator-label">Submit</span>
								</button>
							</div>
                            <div class="text-center" hidden>
								<button type="button" id="submiting_button" class="btn btn-lg btn-primary">
									<span class="indicator-label">Submiting...</span>
								</button>
							</div>
							<!--end::Actions-->
						</form>
						<!--end::Form-->
					</div>
					<!--end::Wrapper-->
				</div>
				<!--end::Content-->
				<!--begin::Footer-->
				<div class="d-flex flex-center flex-column-auto p-10">
					<!--begin::Links-->
					<div class="d-flex align-items-center fw-bold fs-6">
						
						<a href="https://api.whatsapp.com/send?phone=+2349036187325&text=Web%20Development%20Info%20" class="text-muted text-hover-primary px-2">Built By Prince</a>
					</div>
					<!--end::Links-->
				</div>
				<!--end::Footer-->
			</div>
			<!--end::Authentication - Sign-up-->
		</div>
		<!--end::Main-->
		
		<!--begin::Javascript-->
		<!--begin::Global Javascript Bundle(used by all pages)-->
		<script src="{% static 'dashe/assets/plugins/global/plugins.bundle.js' %}"></script>
		<script src="{% static 'dashe/assets/js/scripts.bundle.js' %}"></script>
		<!--end::Global Javascript Bundle-->
		<!--begin::Page Custom Javascript(used by this page)-->
		<script src="{% static 'dashe/assets/js/custom/authentication/sign-up/general.js' %}"></script>
		<!--end::Page Custom Javascript-->
		<!--end::Javascript-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.js" integrity="sha512-OmBbzhZ6lgh87tQFDVBHtwfi6MS9raGmNvUNTjDIBb/cgv707v9OuBVpsN6tVVTLOehRFns+o14Nd0/If0lE/A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script>
            $(document).ready(function () {
                signup();
                var url_string = window.location.href
                var url = new URL(url_string);
                var ref = url.searchParams.get("ref");
                console.log(ref);
                $('#ref').val(ref);
              
                
              
                function signup() {
                  $(document).on("click", "#signup_button", function () {
                    let name = $("#signup_name").val();
                    let username = $("#signup_username").val();
                    let email = $("#signup_email").val();
                    let phoneno = $("#signup_phone").val();
                    let password1 = $("#signup_password1").val();
                    let password2 = $("#signup_password2").val();
                    let csrftoken = $("[name=csrfmiddlewaretoken]").val();
                    console.log(email)
              
                        
                      $.ajax({
                      type: "POST",
                      url: "/signup/",
                      data: {name:name, username: username, email:email, phoneno:phoneno, password1: password1, password2: password2, ref:ref },
                      headers: { "X-CSRFToken": csrftoken },
                      cache: false,
                      dataType: "JSON",
                      success: function (response) {
                         if (response.code == 200 ){
                            window.location.href = response.success
                         }else{
                         iziToast.error({
                            title: "Access Denied - ",
                            position: "topRight",
                            message: response.error,
                            });
                            $("#signup_button").show();
                            $("#submiting_button").attr('hidden', 'hidden');
                         }
                      },
                      beforeSend: function () {
                        $("#signup_button").hide();
                        $("#submiting_button").removeAttr('hidden', true);
    
                      },
                      error: function (response) { },
                      });
                        
              
                  });
                }
              });
        </script>
		
	</body>
	<!--end::Body-->
</html>